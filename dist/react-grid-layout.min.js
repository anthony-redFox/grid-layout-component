var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function i(t){return t.reduce(((t,{y:e,h:i})=>Math.max(t,e+i)),0)}function s(t){return t.map((t=>a(t)))}function a(t){return{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,moved:Boolean(t.moved),static:Boolean(t.static),isDraggable:t.isDraggable,resizable:t.resizable,isBounded:t.isBounded,isGroup:t.isGroup}}function n(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function o(t,e,i){const s=m(t),n=f(t,e),o=Array(t.length);for(let r=0,l=n.length;r<l;r++){let l=a(n[r]);l.static||(l=h(s,l,e,i,n),s.push(l)),o[t.indexOf(n[r])]=l,l.moved=!1}return o}t.d(e,{Me:()=>X,V7:()=>P,En:()=>M,$o:()=>k});const r={x:"w",y:"h"};function l(t,e,i,s){const a=r[s];e[s]+=1;for(let o=t.map((t=>t.i)).indexOf(e.i)+1;o<t.length;o++){const r=t[o];if(!r.static){if(r.y>e.y+e.h)break;n(e,r)&&l(t,r,i+e[a],s)}}e[s]=i}function h(t,e,s,a,n){const o="horizontal"===s;if("vertical"===s)for(e.y=Math.min(i(t),e.y);e.y>0&&!u(t,e);)e.y--;else if(o)for(;e.x>0&&!u(t,e);)e.x--;let r;for(;r=u(t,e);)o?l(n,e,r.x+r.w,"x"):l(n,e,r.y+r.h,"y"),o&&e.x+e.w>a&&(e.x=a-e.w,e.y++);return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function d(t,e){const i=m(t);return t.forEach((t=>{if(t.x+t.w>e.cols&&(t.x=e.cols-t.w),t.x<0&&(t.x=0,t.w=e.cols),t.static)for(;u(i,t);)t.y++;else i.push(t)})),t}function c(t,e){return t.find((t=>t.i===e))}function u(t,e){for(let i=0,s=t.length;i<s;i++)if(n(t[i],e))return t[i]}function g(t,e){return t.filter((t=>n(t,e)))}function m(t){return t.filter((t=>t.static))}function p(t,e,i,a,n,o,r,l,h){if(e.static&&!0!==e.isDraggable)return t;if(e.y===a&&e.x===i)return t;e.i,String(i),String(a),e.x,e.y;const d=e.x,c=e.y;"number"==typeof i&&(e.x=i),"number"==typeof a&&(e.y=a),e.moved=!0;let u=f(t,r);("vertical"===r&&"number"==typeof a?c>=a:"horizontal"===r&&"number"==typeof i&&d>=i)&&(u=u.reverse());const m=g(u,e),p=m.length>0;if(p&&h)return s(t);if(p&&o)return e.i,e.x=d,e.y=c,e.moved=!1,t;for(let i=0,s=m.length;i<s;i++){const s=m[i];e.i,e.x,e.y,s.i,s.x,s.y,s.moved||(t=s.static?y(t,s,e,n,r,l):y(t,e,s,n,r,l))}return t}function y(t,e,i,s,a,n){const o="horizontal"===a,r="horizontal"!==a,l=e.static;if(s){s=!1;const h={x:o?Math.max(e.x-i.w,0):i.x,y:r?Math.max(e.y-i.h,0):i.y,w:i.w,h:i.h,i:"-1"};if(!u(t,h))return i.i,h.x,h.y,p(t,i,o?h.x:void 0,r?h.y:void 0,s,l,a,n)}return p(t,i,o?i.x+1:void 0,r?i.y+1:void 0,s,l,a,n)}function f(t,e){return"horizontal"===e?function(t){return t.slice(0).sort((function(t,e){return t.x>e.x||t.x===e.x&&t.y>e.y?1:-1}))}(t):"vertical"===e?function(t){return t.slice(0).sort((function(t,e){return t.y>e.y||t.y===e.y&&t.x>e.x?1:t.y===e.y&&t.x===e.x?0:-1}))}(t):t}function b(t,e,i){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*i):t}function v(t,e,i,s,a){const{margin:n,cols:o,rowHeight:r,maxRows:l,columnWidth:h}=t;let d=Math.round((i-n[0])/(h+n[0])),c=Math.round((e-n[1])/(r+n[1]));return d=x(d,0,o-s),c=x(c,0,l-a),{x:d,y:c}}function x(t,e,i){return Math.max(Math.min(t,i),e)}function w(t,e,i,s){const a="number"==typeof s?function(t,e){return"targetTouches"in t&&Array.from(t.targetTouches).find((t=>e===t.identifier))||"changedTouches"in t&&Array.from(t.changedTouches).find((t=>e===t.identifier))}(t,s):null;if("number"==typeof s&&!a)return null;const n=a||t;let o=0,r=0;return"clientX"in n&&"clientY"in n&&(o=n.clientX,r=n.clientY),function(t,e,i){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:(t.clientX+e.scrollLeft-s.left)/i,y:(t.clientY+e.scrollTop-s.top)/i}}({clientX:o,clientY:r},e.offsetParent||e.ownerDocument.body,i)}const S={start:"touchstart",move:"touchmove",stop:"touchend"},z={start:"mousedown",move:"mousemove",stop:"mouseup"};let E=z;function C(t,e,i,s){var a;return"number"!=typeof(a=e.lastX)||isNaN(a)?{node:t,deltaX:0,deltaY:0,lastX:i,lastY:s,x:i,y:s}:{node:t,deltaX:i-e.lastX,deltaY:s-e.lastY,lastX:e.lastX,lastY:e.lastY,x:i,y:s}}const L={allowAnyClick:!1,disabled:!1,onStart:function(){},onDrag:function(){},onStop:function(){},scale:1};function M(t,e){const i=e=>{if(!l.allowAnyClick&&"button"in e&&0!==e.button||l.disabled)return;"touchstart"===e.type&&e.preventDefault();const i=function(t){return"targetTouches"in t&&t.targetTouches[0]?t.targetTouches[0].identifier:"changedTouches"in t&&t.changedTouches[0]?t.changedTouches[0].identifier:void 0}(e);r.touchIdentifier=i;const n=w(e,t,l.scale,i);if(null==n)return;const{x:o,y:h}=n,d=C(t,r,o,h);!1!==l.onStart(e,d)&&(r.lastX=o,r.lastY=h,document.addEventListener(E.move,s),document.addEventListener(E.stop,a))},s=e=>{e.preventDefault();const i=w(e,t,l.scale,r.touchIdentifier);if(null==i)return;const{x:s,y:n}=i,o=C(t,r,s,n);!1!==l.onDrag(e,o)?(r.lastX=s,r.lastY=n):a(new MouseEvent("mouseup"))},a=e=>{const i=w(e,t,l.scale,r.touchIdentifier);if(null==i)return;const{x:n,y:o}=i,h=C(t,r,n,o);if(!1===l.onStop(e,h))return!1;r.lastX=NaN,r.lastY=NaN,document.removeEventListener(E.move,s),document.removeEventListener(E.stop,a)},n=t=>(E=z,i(t)),o=t=>(E=S,i(t)),r={lastX:NaN,lastY:NaN,touchIdentifier:void 0},l={...L,...e};return t.addEventListener(S.start,o,{passive:!1}),t.addEventListener(z.start,n),function(){document.removeEventListener(z.move,s),document.removeEventListener(S.move,s),document.removeEventListener(z.stop,a),document.removeEventListener(S.stop,a),t.removeEventListener(S.start,o),t.removeEventListener(z.start,n)}}let A=null,N=null;function R({axis:t,handleAxis:e,lockAspectRatio:i},s,{node:a,deltaX:n,deltaY:o}){const{width:r,height:l,transformScale:h}=s,d=("both"===t||"x"===t)&&"n"!==e&&"s"!==e,c=("both"===t||"y"===t)&&"e"!==e&&"w"!==e;if(!d&&!c)return null;const u=t[0],g=t[t.length-1],m=a.getBoundingClientRect();null!=A&&("w"===g&&(n+=m.left-A.left),"n"===u&&(o+=m.top-A.top)),A=m,"w"===g&&(n=-n),"n"===u&&(o=-o);let p=r+(d?n/h:0),y=l+(c?o/h:0);return[p,y]=function(t,e,{minConstraints:i,maxConstraints:s,width:a,height:n},o){if(!i&&!s&&!o)return[t,e];if(o){const i=a/n,s=t-a,o=e-n;Math.abs(s)>Math.abs(o*i)?e=t/i:t=e*i}const[r,l]=[t,e],[h,d]=N||[0,0];return t+=h,e+=d,i&&(t=Math.max(i[0],t),e=Math.max(i[1],e)),s&&(t=Math.min(s[0],t),e=Math.min(s[1],e)),N=[h+(r-t),d+(l-e)],[t,e]}(p,y,s,i),p!==r||y!==l?[p,y]:null}function k(t,e,i){const{lockAspectRatio:s=!1,handleAxis:a="se",axis:n="both",start:o,resize:r,stop:l}=i,h={width:0,height:0,minConstraints:[20,20],maxConstraints:[1/0,1/0],transformScale:1};return M(e,{onStop(t,e){const i=R({handleAxis:a,axis:n,lockAspectRatio:s},h,e)||[h.width,h.height],[o,r]=i;l(t,{size:{width:o,height:r},handle:a}),A=null,N=null},onStart(e){e.stopPropagation(),h.width=t.offsetWidth,h.height=t.offsetHeight;const i=o();if(i)Object.assign(h,i);else if(!1===i)return!1;A=null,N=null},onDrag(t,e){const i=R({handleAxis:a,axis:n,lockAspectRatio:s},h,e);if(i){const[e,s]=i;h.width=e,h.height=s,r(t,{size:{width:e,height:s},handle:a})}}})}const D=document.createElement("template");D.innerHTML='<slot></slot><div class="resizable-handle resizable-handle-se"></div>';const H=new CSSStyleSheet;H.replaceSync(':host{display:block;width:calc(var(--grid-element-width) * var(--element-w,1) + (var(--element-w,1) - 1) * var(--grid-element-margin-left));height:calc(var(--grid-element-height) * var(--element-h,1) + (var(--element-h,1) - 1) * var(--grid-element-margin-top));transform:translate(calc((var(--grid-element-width) + var(--grid-element-margin-left)) * var(--element-x,0) + var(--grid-layout-padding-left)),calc((var(--grid-element-height) + var(--grid-element-margin-top)) * var(--element-y,0) + var(--grid-layout-padding-top)));position:absolute;box-sizing:border-box;transition:transform .2s ease,visibility .1s linear}:host([maximize]){position:sticky;width:calc(100% - var(--grid-layout-padding-left) * 2);height:calc(100% - var(--grid-layout-padding-top) * 2);transform:translate(var(--grid-layout-padding-left),var(--grid-layout-padding-top));transition:width .2s ease,height .2s ease;z-index:3}:host([resizable]) .resizable-handle{position:absolute;width:20px;height:20px}:host([resizable=active]){z-index:1;will-change:width,height}:host([drag=active]){transition:none;z-index:3;will-change:transform}:host([resizable]) .resizable-handle:before{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid rgba(0,0,0,.4);border-bottom:2px solid rgba(0,0,0,.4)}:host([resizable]) .resizable-handle.resizable-handle-se{bottom:0;right:0;cursor:se-resize}');class P extends HTMLElement{constructor(){super(...arguments),this.template=D,this.sheet=new CSSStyleSheet,this.transformScale=1,this.minW=1,this.maxW=1/0,this.minH=1,this.maxH=1/0,this.state={h:1,w:1,x:0,y:0}}setState(t){Object.assign(this.state,t)}onDragStart(){if(this.hasAttribute("static")||this.hasAttribute("maximize")||"false"===this.getAttribute("drag"))return!1;const t=this.transformScale,e={top:0,left:0},{offsetParent:i}=this;if(!i)return;const s=i.getBoundingClientRect(),a=this.getBoundingClientRect(),n=a.left/t,o=s.left/t,r=a.top/t,l=s.top/t;if(e.left=n-o+i.scrollLeft,e.top=r-l+i.scrollTop,this.hasAttribute("bounded")){const t=window.getComputedStyle(this),s=Number.parseInt(t.getPropertyValue("--grid-element-height")),a=Number.parseInt(t.getPropertyValue("--grid-element-width")),n=Number.parseInt(t.getPropertyValue("--grid-element-margin-left")),o=Number.parseInt(t.getPropertyValue("--grid-element-margin-top")),{w:r,h:l}=this.state;e.bottomBoundary=i.clientHeight-b(l,s,o),e.rightBoundary=i.clientWidth-b(r,a,n)}const h=new CustomEvent("gridLayoutElementDrag",{bubbles:!0,cancelable:!0,detail:{key:this.dataset.id,life:"start"}});if(this.dispatchEvent(h),h.defaultPrevented)return!1;this.setState({dragging:e}),this.setAttribute("drag","active")}onDrag(t,{deltaX:e,deltaY:i}){const s=this.state.dragging;if(!s)return;let a=s.top+i,n=s.left+e;if(s.bottomBoundary&&s.rightBoundary){const{bottomBoundary:t,rightBoundary:e}=s;a=x(a,0,t),n=x(n,0,e)}this.setState({dragging:{...s,top:a,left:n}}),this.style.transform=`translate(${Math.round(n)}px,${Math.round(a)}px)`,this.dispatchEvent(new CustomEvent("gridLayoutElementDrag",{bubbles:!0,detail:{key:this.dataset.id,life:"move",top:a,left:n}}))}onDragStop(){if(!this.state.dragging)return;const{left:t,top:e}=this.state.dragging;this.setState({dragging:void 0}),this.removeAttribute("style"),this.setAttribute("drag",""),this.dispatchEvent(new CustomEvent("gridLayoutElementDrag",{bubbles:!0,detail:{key:this.dataset.id,life:"end",top:e,left:t}}))}onResizeStop(){this.removeAttribute("style"),this.setAttribute("resizable",""),this.dispatchEvent(new CustomEvent("gridLayoutElementResize",{bubbles:!0,detail:{key:this.dataset.id,life:"end"}}))}onResizeStart(){if(this.hasAttribute("static")||this.hasAttribute("maximize")||"false"===this.getAttribute("resizable"))return!1;const t=new CustomEvent("gridLayoutElementResize",{bubbles:!0,detail:{key:this.dataset.id,life:"start"}});if(this.dispatchEvent(t),t.defaultPrevented)return!1;this.setAttribute("resizable","active");const e=window.getComputedStyle(this),i=Number.parseInt(e.getPropertyValue("--grid-element-height")),s=Number.parseInt(e.getPropertyValue("--grid-element-width")),a=Number.parseInt(e.getPropertyValue("--grid-element-margin-left")),n=Number.parseInt(e.getPropertyValue("--grid-element-margin-top")),o=Number.parseInt(e.getPropertyValue("--grid-layout-cols")),{x:r}=this.state;return{minConstraints:[b(this.minW,s,a),b(this.minH,i,n)],maxConstraints:[b(Math.min(this.maxW,o-r),s,a),b(this.maxH,i,n)],transformScale:this.transformScale}}onResize(t,e){const{size:i}=e;this.style.width=`${i.width}px`,this.style.height=`${i.height}px`,this.dispatchEvent(new CustomEvent("gridLayoutElementResize",{bubbles:!0,detail:{key:this.dataset.id,life:"move",width:i.width,height:i.height}}))}makeDraggable(){M(this,{onStart:()=>this.onDragStart(),onDrag:(t,e)=>this.onDrag(t,e),onStop:()=>this.onDragStop(),scale:this.transformScale})}makeResizable(){const t=this.shadow.querySelector(".resizable-handle");t&&k(this,t,{stop:()=>this.onResizeStop(),start:()=>this.onResizeStart(),resize:(...t)=>this.onResize(...t)})}connectedCallback(){this.shadow=this.attachShadow({mode:"open"}),this.shadow.appendChild(this.template.content.cloneNode(!0)),this.shadow.adoptedStyleSheets=[H,this.sheet],this.makeDraggable(),this.makeResizable()}attributeChangedCallback(t,e,i){"x"===t||"y"===t||"h"===t||"w"===t?(this.state[t]=Number.parseInt(i||""),this.setVaribles()):"maximize"===t&&this.dispatchEvent(new CustomEvent("gridLayoutElementMaximaze",{bubbles:!0,detail:null!==i}))}setVaribles(){this.sheet.replaceSync(`:host{--element-x: ${this.state.x};--element-y: ${this.state.y};--element-h: ${this.state.h};--element-w: ${this.state.w};}`)}static get observedAttributes(){return["x","y","h","w","maximize"]}}const T=document.createElement("template");T.innerHTML="<slot></slot><button>collapse</button>";const I=new CSSStyleSheet;I.replaceSync(":host{width:calc(var(--grid-element-width) * var(--grid-layout-cols,1) + (var(--grid-layout-cols,1) - 1) * var(--grid-element-margin-left));height:calc(var(--grid-element-height) * var(--element-h,1) + (var(--element-h,1) - 1) * var(--grid-element-margin-top));transform:translate(var(--grid-layout-padding-left),calc((var(--grid-element-height) + var(--grid-element-margin-top)) * var(--element-y,0) + var(--grid-layout-padding-top)))}");class W extends P{constructor(){super(...arguments),this.template=T}attributeChangedCallback(t,e,i){"collapsed"!==t||null!==e&&null!==i?["x","h","w","maximize"].includes(t)&&null!==i?this.removeAttribute(t):super.attributeChangedCallback(t,e,i):this.dispatchEvent(new CustomEvent("gridLayoutGroupCollapsed",{bubbles:!0,detail:this.dataset.id}))}connectedCallback(){super.connectedCallback(),this.shadow.adoptedStyleSheets=[...this.shadow.adoptedStyleSheets,I];const t=this.shadow.querySelector("button");t&&(t.onclick=()=>this.hasAttribute("collapsed")?this.removeAttribute("collapsed"):this.setAttribute("collapsed",""))}static get observedAttributes(){return["x","y","h","w","maximize","collapsed"]}}const $=new CSSStyleSheet;$.replaceSync(":host{display:block;position:relative;transition:height .2s ease}.grid-placeholder{background-color:red;position:absolute;opacity:.2;z-index:2;transition:none}.grid-placeholder_active{transition:transform .1s ease}");const O=document.createElement("template");O.innerHTML='<div class="grid-placeholder" style="display: none;"></div><slot></slot>';class X extends HTMLElement{constructor(){super(...arguments),this.template=O,this.sheet=new CSSStyleSheet,this.observer=new ResizeObserver((()=>this.calculateSize())),this.breakpoints={lg:1200,md:996,sm:768,xs:480,xxs:0},this.colsAdaptation={lg:12,md:10,sm:6,xs:4,xxs:2},this.containerPadding={lg:null,md:null,sm:null,xs:null,xxs:null},this.layout=[],this.maximaze={overflow:"",top:0},this.groupCollapsing=new Map,this.state={autoSize:!0,responsive:!0,layout:[],colsNumber:12,rowHeight:150,columnWidth:0,containerPadding:null,maxRows:1/0,margin:[10,10],compactType:"vertical",allowOverlap:!1,preventCollision:!1,isDraggable:!0,resizable:!0,isBounded:!1,activeDrag:null,oldDragItem:null,oldLayout:null,oldResizeItem:null},this.dragHandler=t=>{const{detail:e,target:i}=t;i instanceof HTMLElement&&i.parentElement===this&&(this.state.isDraggable||i.hasAttribute("drag")?"start"===e.life?this.dragStart(e):"move"===e.life?this.drag(e):"end"===e.life&&this.dragStop(e):t.preventDefault())},this.resizeHandler=t=>{const{detail:e,target:i}=t;i instanceof P&&i.parentElement===this&&(this.state.resizable||i.hasAttribute("resizable")?"start"===e.life?this.onResizeStart(e):"move"===e.life?this.onResize(e,i):"end"===e.life&&this.onResizeStop():t.preventDefault())},this.maximazeHandler=t=>{const{detail:e,target:i}=t;i instanceof HTMLElement&&i.parentElement===this&&(e?(this.maximaze={overflow:this.style.overflow,top:this.scrollTop},this.style.overflow="hidden",this.scrollTop=0):(this.style.overflow=this.maximaze.overflow,this.scrollTop=this.maximaze.top))},this.collapsedHandler=t=>{const{detail:e,target:i}=t;if(!(i instanceof HTMLElement)||i.parentElement!==this)return;const{layout:s,allowOverlap:a,colsNumber:n}=this.state,r=s.find((({i:t})=>t===e));if(!r)return;const l=i.hasAttribute("collapsed");let h,d;if(l){const t=s.reduce(((t,{isGroup:e,y:i})=>e&&r.y<i?Math.min(t,i):t),1/0);let i=[];h=s.filter((e=>{const s=e.y<t&&e.y>r.y;return s&&i.push(e),!s})),i=f(i,this.state.compactType),i.forEach((t=>!t.static&&(t.y=r.y))),d=new Set(i.map((t=>t.i))),this.groupCollapsing.set(e,i)}else{const t=this.groupCollapsing.get(e)||[];d=new Set(t.map((t=>t.i))),h=[...s,...t],this.groupCollapsing.delete(e)}for(const t of this.children)t instanceof HTMLElement&&d.has(t.dataset.id||"")&&(t.style.visibility=l?"hidden":"visible");const c=a?h:o(h,this.state.compactType,n);this.setState({layout:c}),this.onLayoutMaybeChanged(h,s)}}setState(t){Object.assign(this.state,t),this.render()}dragStart({key:t}){const{layout:e}=this.state,i=c(e,t);i&&this.setState({oldDragItem:a(i),oldLayout:e})}drag({key:t,top:e,left:i}){let{layout:s}=this.state;const{colsNumber:a,allowOverlap:n,preventCollision:r}=this.state,l=c(s,t);if(!l)return;const{x:h,y:d}=v(this.getPositionParams(),e,i,l.w,l.h),u={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:t};s=p(s,l,h,d,!0,r,this.state.compactType,a,n),this.setState({layout:n?s:o(s,this.state.compactType,a),activeDrag:u})}dragStop({key:t,top:e,left:i}){let{layout:s}=this.state;const{colsNumber:a,preventCollision:n,allowOverlap:r}=this.state,l=c(s,t);if(!l)return;const{x:h,y:d}=v(this.getPositionParams(),e,i,l.w,l.h);l.isGroup&&this.groupCollapsing.has(t)&&this.groupCollapsing.get(t)?.forEach((t=>!t.static&&(t.y=d))),s=p(s,l,h,d,!0,n,this.state.compactType,a,r);const u=r?s:o(s,this.state.compactType,a),{oldLayout:g}=this.state;this.setState({activeDrag:null,layout:u,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(u,g)}onResizeStart({key:t}){const{layout:e}=this.state,i=c(e,t);i&&this.setState({oldResizeItem:a(i),oldLayout:this.state.layout})}onResize({key:t,width:e,height:i},s){const{layout:n}=this.state,{colsNumber:r,preventCollision:l,allowOverlap:h}=this.state,d=c(n,t);if(!d)return;let{w:u,h:m}=function(t,e,i,s,a){const{margin:n,maxRows:o,cols:r,rowHeight:l,columnWidth:h}=t;let d=Math.round((e+n[0])/(h+n[0])),c=Math.round((i+n[1])/(l+n[1]));return d=x(d,0,r-s),c=x(c,0,o-a),{w:d,h:c}}(this.getPositionParams(),e,i,d.x,d.y);u=x(u,s.minW,Math.min(s.maxW,r-d.x)),m=x(m,s.minH,s.maxH);const[p,y]=function(t,e,i){let s=c(t,e);return s?(s=i(a(s)),[t=function(t,e){return t.map((t=>t.i===e.i?e:t))}(t,s),s]):[t,null]}(n,t,(t=>{let e=!1;if(l&&!h){const i=g(n,{...t,w:u,h:m}).filter((e=>e.i!==t.i));if(e=i.length>0,e){let e=1/0,s=1/0;i.forEach((i=>{i.x>t.x&&(e=Math.min(e,i.x)),i.y>t.y&&(s=Math.min(s,i.y))})),Number.isFinite(e)&&(t.w=e-t.x),Number.isFinite(s)&&(t.h=s-t.y)}}return e||(t.w=u,t.h=m),t}));if(!y)return;const f={w:y.w,h:y.h,x:y.x,y:y.y,static:!0,i:t};this.setState({layout:h?p:o(p,this.state.compactType,r),activeDrag:f})}onResizeStop(){const{layout:t}=this.state,{colsNumber:e,allowOverlap:i}=this.state,s=i?t:o(t,this.state.compactType,e),{oldLayout:a}=this.state;this.setState({activeDrag:null,layout:s,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(s,a)}onLayoutMaybeChanged(t,e){var i,s;e||(e=this.state.layout),s=t,(i=e).length===s.length&&i.every(((t,e)=>{const i=s[e];if(i===t)return!0;const a=Object.keys(t),n=Object.keys(i);return a.length===n.length&&a.every((e=>t[e]===i[e]))}))||this.dispatchEvent(new CustomEvent("layoutChanged",{detail:{oldLayout:e,layout:t}}))}getPositionParams(){return{cols:this.state.colsNumber,columnWidth:this.state.columnWidth,containerPadding:this.state.containerPadding||this.state.margin,margin:this.state.margin,maxRows:this.state.maxRows,rowHeight:this.state.rowHeight}}calculateSize(){if(!this.isConnected)return;const{responsive:t,compactType:e}=this.state;let{colsNumber:i,containerPadding:a}=this.state;if(t){const t=function(t,e){const i=function(t){return Object.keys(t).sort(((e,i)=>t[e]-t[i]))}(t);let s=i[0];for(let a=1,n=i.length;a<n;a++){const n=i[a];e>t[n]&&(s=n)}return s}(this.breakpoints,this.clientWidth),n=function(t,e){if(!e[t])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}(t,this.colsAdaptation);n!==i&&(i=this.state.colsNumber=n,a=this.state.containerPadding=this.containerPadding[t]||null,this.state.layout=o(d(s(this.layout),{cols:i}),e,i),this.render())}const{rowHeight:n,margin:r}=this.state,l=a||r;this.state.columnWidth=function(t,e){const{margin:i,containerPadding:s,cols:a}=t;return(e-i[0]*(a-1)-2*s[0])/a}(this.getPositionParams(),this.clientWidth),this.sheet.replaceSync(`:host {\n        --grid-layout-cols: ${i};\n        --grid-element-width: ${this.state.columnWidth}px;\n        --grid-element-height: ${n}px;\n        --grid-element-margin-left: ${r[0]}px;\n        --grid-element-margin-top: ${r[1]}px;\n        --grid-layout-padding-top: ${l[0]}px;\n        --grid-layout-padding-left: ${l[1]}px;\n    }`)}connectedCallback(){this.addEventListener("gridLayoutElementDrag",this.dragHandler),this.addEventListener("gridLayoutElementResize",this.resizeHandler),this.addEventListener("gridLayoutElementMaximaze",this.maximazeHandler),this.addEventListener("gridLayoutGroupCollapsed",this.collapsedHandler),this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=[$,this.sheet],this.shadow.appendChild(O.content.cloneNode(!0)),this.shadow.addEventListener("slotchange",(t=>{const e=t.target;if(!(e instanceof HTMLSlotElement)||e.name)return;const i=[];e.assignedNodes().forEach((t=>{if(!(t instanceof HTMLElement&&t.dataset.id))return;const e=t instanceof W,s=Number.parseInt(t.getAttribute("x")||"0"),a=Number.parseInt(t.getAttribute("y")||"0"),n=Number.parseInt(t.getAttribute("w")||"1"),o=Number.parseInt(t.getAttribute("h")||"1"),r={i:t.dataset.id,static:t.hasAttribute("static"),isDraggable:t.hasAttribute("drag")?"false"!==t.getAttribute("drag"):void 0,resizable:t.hasAttribute("resizable")?"false"!==t.getAttribute("resizable"):void 0,isBounded:t.hasAttribute("bounded")?"false"!==t.getAttribute("bounded"):void 0,x:s,y:a,w:n,h:o};i.push(r),e&&(r.w=this.state.colsNumber,r.isGroup=!0)})),this.layout=s(i);const a=this.state.colsNumber,n=d(i,{cols:a});this.state.layout=this.state.allowOverlap?n:o(n,this.state.compactType,a),this.onLayoutMaybeChanged(this.state.layout,this.layout),this.render()}));const t=this.shadow.querySelector(".grid-placeholder");t&&(this.placeholder=t),this.observer.observe(this),this.calculateSize();const e=window.getComputedStyle(this);"visible"===e.overflow&&"auto"===e.height||(this.state.autoSize=!1)}attributeChangedCallback(t,e,i){if("row-height"===t){const t=Number.parseInt(i)||this.state.rowHeight;if(!t)return;this.state.rowHeight=t,this.calculateSize()}}syncWithNode(t,e=["x","y","w","h"]){for(const i of this.children){if(!(i instanceof P&&i.dataset.id&&t[i.dataset.id]))continue;const s=t[i.dataset.id];e.forEach((t=>i.state[t]!==s[t]&&i.setAttribute(t,String(s[t]))))}}containerHeight(){const t=i(this.state.layout),e=this.state.containerPadding?this.state.containerPadding[1]:this.state.margin[1];return t*this.state.rowHeight+(t-1)*this.state.margin[1]+2*e+"px"}render(){if(!this.isConnected)return;const t=this.state.layout.reduce(((t,e)=>(t[e.i]=e,t)),{}),e=this.state.activeDrag;if(this.placeholder.classList.toggle("grid-placeholder_active",!!e&&"none"!==this.placeholder.style.display),this.placeholder.style.display=e?"block":"none",this.state.autoSize&&(this.style.height=this.containerHeight()),this.state.oldDragItem||this.state.oldResizeItem){this.syncWithNode(t,["x","y"]);const e=this.state.activeDrag;if(!e)return;const i=function(t,e,i,s,a){const{margin:n,containerPadding:o,rowHeight:r,columnWidth:l}=t;return{width:b(s,l,n[0]),height:b(a,r,n[1]),top:Math.round((r+n[1])*i+o[1]),left:Math.round((l+n[0])*e+o[0])}}(this.getPositionParams(),e.x,e.y,e.w,e.h);return this.placeholder.style.transform=`translate(${i.left}px,${i.top}px)`,this.placeholder.style.width=`${i.width}px`,void(this.placeholder.style.height=`${i.height}px`)}this.groupCollapsing.forEach((e=>e.forEach((e=>t[e.i]=e)))),this.syncWithNode(t)}static get observedAttributes(){return["row-height","drag","resizable","bounded"]}}var B=e.Me,Y=e.V7,V=e.En,G=e.$o;export{B as GridLayout,Y as GridLayoutElement,V as draggable,G as resizable};
//# sourceMappingURL=react-grid-layout.min.js.map